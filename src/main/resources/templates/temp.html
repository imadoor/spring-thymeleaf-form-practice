<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Getting Started: Handling Form Submission</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  </head>
  <body>
    <h1>Result</h1>
    <p th:text="'id: ' + ${greeting.id}" />
      <p th:text="'content: ' + ${greeting.content}" />
        <a href="/greeting">Submit another message</a>
        <div ng-app="add-row" ng-controller="MainCtrl">
          <form name="setupNewGrid">
            <fieldset  ng-repeat="column in columns">
              <input type="text" name="columnName" ng-model="column.name" name="" placeholder="Column Name">
              <button class="remove"  ng-click="removeColumn($index)">x</button>
            </fieldset>
            <button class="addfields" ng-click="addNewColumn()">Add Column</button>
            <button class="addfields" ng-click="setupNewGrid">Validate</button>
          </form>
          <h4 class="msg" ng-model="column.textareaValue">TextareaValue : {{column.textareaValue}}</h4>
          <h4 class="msg">Column Name Validation : {{setupNewGrid.columnName.$valid}}</h4>
          <h4 class="msg">Data Type Selected ID: {{dataType.id}} </h4>
          <div class="msg">{{columns}}</div>
        </div>
      </body>
      <script type="text/javascript">
      
      
      var app = angular.module('add-row', []);
      app.controller('MainCtrl', function($scope) {
      
      
      $scope.columns = [{colId: 'col1', name:''}];

      $scope.addNewColumn = function() {
      var newItemNo = $scope.columns.length+1;
      $scope.columns.push({'colId':'col'+newItemNo});
      };
      
      $scope.removeColumn = function(index) {
      // remove the row specified in index
      $scope.columns.splice( index, 1);
      // if no rows left in the array create a blank array
      if ( $scope.columns.length() === 0 || $scope.columns.length() == null){
      alert('no rec');
      $scope.columns.push = [{"colId":"col1"}];
      }
      
      
      };
      
      });
      </script>
    </html>